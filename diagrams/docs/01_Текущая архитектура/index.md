# Текущая архитектура

## Краткое описание

**Монолитное приложение** реализовано на Go с использованием базы данных PostgreSQL.

Главные функции:
- Управление отоплением (включить/выключить)
- Мониторинг температуры

### Проблемы архитектуры

- Монолитная архитектура: всё в одном приложении
- Нет разделения по доменам (Domain-Driven Design не реализован)
- Подключение устройств — только через специалиста
- Синхронное взаимодействие и невозможность горизонтального масштабирования
- Невозможность гибкой интеграции новых устройств

---

## Контекстная диаграмма: Текущий монолит

```puml
@startuml Current_Context_Diagram
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

Person(admin, "Администратор", "Настраивает систему")
Person(user, "Пользователь", "Включает/выключает отопление, смотрит температуру")
Person(technician, "Техник", "Подключает датчики вручную")

System(monolith, "Монолитное приложение", "Go + PostgreSQL", "Управление отоплением, температура, устройства")

SystemDb(database, "PostgreSQL", "Реляционная база данных", "Хранит пользователей, устройства, историю температур")

System_Ext(sensor, "Датчик температуры", "Отправляет данные по HTTP")

Rel(admin, monolith, "Настройка параметров", "HTTP/Web UI")
Rel(user, monolith, "Управление отоплением, запрос температуры", "HTTP/Web UI")
Rel(technician, monolith, "Регистрация датчиков", "HTTP (только вручную)")
Rel(monolith, database, "Чтение/запись данных", "SQL")
Rel(monolith, sensor, "Опрос температуры", "HTTP поллинг")
Rel_Back(sensor, monolith, "Данные о температуре", "HTTP Push")

@enduml
```